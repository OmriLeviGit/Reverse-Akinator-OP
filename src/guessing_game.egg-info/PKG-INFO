Metadata-Version: 2.4
Name: guessing_game
Version: 0.1.0
Summary: A One Piece character guessing game
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Provides-Extra: dev
Requires-Dist: pytest; extra == "dev"
Requires-Dist: pytest-asyncio; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: flake8; extra == "dev"
Requires-Dist: mypy; extra == "dev"

# Guess Game

A reverse Akinator-style guessing game where the app selects a random character and players ask yes/no questions to identify who it is. Players must deduce the character through strategic questioning.

## Features

- Random character selection from comprehensive database
- Yes/no question system for character deduction
- Strategic guessing mechanics with attempt tracking
- Modern React frontend with TypeScript
- FastAPI backend with Redis session management
- Automated character database population from external sources
- Docker deployment support

## Tech Stack

### Backend
- **FastAPI** - Modern Python web framework
- **Redis** - Session and game state management  
- **SQLAlchemy** - Database ORM
- **AI Integration** - Question answering system
- **Pydantic** - Data validation and serialization

### Frontend
- **React 18** - UI framework
- **TypeScript** - Type safety
- **Vite** - Build tool and dev server
- **shadcn/ui** - UI component library
- **Tailwind CSS** - Styling
- **React Query** - API state management

## Getting Started

### Prerequisites
- Python 3.8+
- Node.js 18+
- Redis (or use Docker Compose)
- AI API key for question answering

### Quick Start with Docker

1. Clone the repository and navigate to the directory
2. Set up environment variables:
```bash
# Create .env file with your AI API key
echo "GOOGLE_AI_API_KEY=your_api_key_here" > .env
```

3. Run with Docker Compose:
```bash
docker-compose up -d
```

The application will be available at `http://localhost:3000`

### Manual Setup

#### Backend Setup
1. Create and activate virtual environment:
```bash
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate
```

2. Install dependencies:
```bash
pip install -r requirements.txt
```

3. Start Redis server (if not using Docker)

4. Run the FastAPI server:
```bash
uvicorn server.app:app --reload --port 8000
```

#### Frontend Setup
1. Navigate to client directory:
```bash
cd client
```

2. Install dependencies:
```bash
npm install
```

3. Start development server:
```bash
npm run dev
```

## Database Setup

The game uses an automated bootstrap process to populate the character database:

### Bootstrap Process
Run the complete bootstrap sequence:
```bash
python -m server.database.bootstrap_tools.bootstrap
```

This runs three sequential steps:

#### 1. Character Data Scraping
```bash
python -m server.database.bootstrap_tools.fetch_character_data
```
- Scrapes character information from One Piece wiki
- Extracts character names, types (Canon/Non-Canon), episodes, chapters
- Handles duplicate characters by priority (Canon > Filler > Movie)
- Sanitizes character names for filesystem compatibility
- Outputs: `server/database/character_data.csv`

#### 2. Avatar Download
```bash
python -m server.database.bootstrap_tools.download_large_avatars
```
- Downloads high-resolution character images from wiki pages
- Implements rate limiting and 403 error handling
- Prioritizes anime images over manga images
- Converts images to WebP format for optimization
- Outputs: `server/database/img/lg_avatars/*.webp`

Optional: Start from specific letter to resume interrupted downloads:
```bash
python -m server.database.bootstrap_tools.download_large_avatars M
```

#### 3. Thumbnail Generation
```bash
python -m server.database.bootstrap_tools.create_small_avatars
```
- Creates square thumbnails from large images
- Crops from top-center to preserve character faces
- Resizes to 128x128 pixels by default
- Outputs: `server/database/img/sm_avatars/*.webp`

### Bootstrap Features
- **Skip existing**: Avoids re-downloading existing files
- **Rate limiting**: Prevents IP blocking with delays between requests
- **Error recovery**: Automatic retry logic for failed downloads
- **Progress tracking**: Detailed logging of success/failure counts
- **Resume capability**: Can restart from specific points in the alphabet

## Project Structure

```
guess_game/
├── server/                    # FastAPI backend
│   ├── database/             # Database models and utilities
│   │   ├── bootstrap_tools/  # Database population scripts
│   │   ├── img/             # Character images (generated)
│   │   └── character_data.csv # Character database (generated)
│   ├── llm/                 # AI integration
│   ├── pydantic_schemas/    # Data validation schemas
│   ├── routes/              # API endpoints
│   ├── GameManager.py       # Game logic
│   ├── SessionManager.py    # Session management
│   └── app.py               # FastAPI app
├── client/                   # React frontend
│   ├── src/
│   │   ├── components/      # React components
│   │   ├── pages/           # Application pages
│   │   └── lib/             # Utilities
│   └── package.json
├── docker-compose.yaml       # Docker services
├── Dockerfile               # Backend container
└── requirements.txt         # Python dependencies
```
